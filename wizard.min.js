/* jwizard-bootstrap by Emeric BAVEUX (Emeric0101)
 * version 0.1
 */
var wizard={callPageCallback:function(b,h,l){var k=!0;b.data("pages").each(function(){if($(this).attr("data-id")==h&&"undefined"!==typeof $(this).attr("data-callback")){var a=$(this).attr("data-callback"),a=window[a];"function"===typeof a&&($(".wizardLoading").show(),k=a(l),$(".wizardLoading").hide())}});return k},updatePage:function(b){var h=b.data("page");b.data("pages").each(function(){$(this).attr("data-id")==h?$(this).show():$(this).hide()});b.data("tabsUl").children("li").each(function(){$(this).attr("data-id")==
h?$(this).addClass("active"):$(this).removeClass("active")});b.children(".toolbox").children(".btn").removeClass("disabled");1==b.data("page")?(b.children(".toolbox").children(".validButton").addClass("disabled"),b.children(".toolbox").children(".previousButton").addClass("disabled")):b.data("pageNb")==b.data("page")?(b.children(".toolbox").children(".nextButton").addClass("disabled"),b.children(".toolbox").children(".validButton").removeClass("disabled")):b.children(".toolbox").children(".validButton").addClass("disabled")}};
$.fn.wizard=function(b,h,l){if("goto"===b){var k=!1;"undefined"!==typeof l&&(k=l);if("undefined"!==typeof h)this.each(function(){var a=$(this).data("settings");a.change(parseInt(h-a.wrapper.data("page")),k)});else throw"Wizard : Argument not valid";}else{var a=$.extend({wizardMode:!0,callback:null,wrapper:null,anchor:"#generalWrapper",nextCaption:"Next",previousCaption:"Previous",submitCaption:"Submit",change:function(a,b){"undefined"===typeof b&&(b=!1);$(this).each(function(c){c=$(this)[c].wrapper;
var e=c.data("page"),f=parseInt(e)+a;if(!b)if(0<a)for(var g=e;g<f;g++){if(!wizard.callPageCallback(c,g,f))return}else for(g=e;g>f;g--)if(!wizard.callPageCallback(c,g,f))return;(0<a&&e<c.data("pageNb")||0>a&&1<c.data("page"))&&!c.data("tabsUl").children('li[data-id="'+f+'"]').hasClass("disabled")&&(c.data("page",parseInt(e)+a),wizard.updatePage(c))})}},b);return this.each(function(){var b=$(this).children(".page");"function"===typeof a.callback&&(a.callback=[{caption:a.submitCaption,callback:a.callback}]);
if(!1===a.wizardMode){b.show();b.each(function(){$(this).after($("<hr/>"))});if(null!==a.callback)for(var d in a.callback)b.parent().append($("<div/>").addClass("textAlignCenter").html($("<div/>").data("callback",a.callback[d].callback).addClass("btn btn-primary").click(function(){$(this).data("callback")()}).html(a.callback[d].caption)));return!0}var c=$(this);a.wrapper=c;$(this).data("settings",a);$(this).addClass("wizard form-horizontal");$(this).data("pages",b);$(this).data("pageNb",b.length);
$(this).data("page",1);var e=$("<ul/>");e.attr("data-tabs","tabs");e.addClass("nav nav-tabs");$(this).data("tabsUl",e);var f=0;b.each(function(){f++;$(this).attr("data-id",f);var b=$(this).attr("data-title");"undefined"===typeof b&&(b="Etape "+f);var a=$(this).attr("data-enabled"),a="undefined"===typeof a||"true"===a?"":"disabled";1===f?(a+=" active",$(this).show()):$(this).hide();e.append($("<li/>").hover(function(){$(this).hasClass("disabled")?$(this).attr("title","Vous devez avoir rempli les \u00e9tapes pr\u00e9c\u00e9dentes pour cliquer ici."):
$(this).attr("title","")}).data("wrapper",c).html($("<a/>").html(b)).attr("data-id",f).addClass(a+" cursorPointer wizardTab").click(function(){$(this).data("wrapper").wizard("goto",$(this).attr("data-id"))}))});b=$("<div/>");b.append(e);$(this).prepend(b);b.tab();b=$(this).attr("data-title");"undefined"!==typeof b&&$(this).prepend($("<h3/>").html(b));b=[];for(d in a.callback){var g=$("<a/>").attr("href",a.anchor).data("callback",a.callback[d].callback).addClass("btn btn-primary").click(function(){$(this).hasClass("disabled")||
$(this).data("callback")()}).html(a.callback[d].caption);"undefined"!==typeof a.callback[d].alwaysEnable&&0!=a.callback[d].alwaysEnable||g.addClass("validButton disabled");var h=$("<a/>").attr("href",a.anchor).data("callback",a.callback[d].callback).addClass("btn btn-primary displayNone validMobileButton").click(function(){$(this).data("callback")()}).html(a.callback[d].caption);b.push(g);b.push(h)}d=$("<div/>");d.attr("class","toolbox").append($("<a/>").attr("href",a.anchor).data("wrapper",$(this)).addClass("btn btn-primary disabled previousButton").click(function(){$(this).data("wrapper").data("settings").change(-1)}).html(a.previousCaption),
$("<a/>").attr("href",a.anchor).data("wrapper",$(this)).addClass("btn btn-primary nextButton").click(function(){$(this).data("wrapper").data("settings").change(1)}).html(a.nextCaption),b,$("<span/>").addClass("wizardLoading").hide().html("Merci de patienter..."),$("<div/>").addClass("clearBoth"));$(this).append(d);$(this).show()})}};